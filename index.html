<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF Uploader</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="summarizer-button/note-taking-button.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>PDF Document Uploader</h1>
            <p>Upload your PDF documents securely</p>
        </header>
        
        <main>
            <div class="upload-section">
                <div class="upload-area" id="uploadArea">
                    <div class="upload-icon">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                            <polyline points="7,10 12,15 17,10"></polyline>
                            <line x1="12" y1="15" x2="12" y2="3"></line>
                        </svg>
                    </div>
                    <h3>Drop your PDF here</h3>
                    <p>or click to browse files</p>
                    <input type="file" id="fileInput" accept=".pdf">
                </div>
                
            </div>
            
            <div class="file-list" id="fileList">
                <!-- Uploaded files will appear here -->
            </div>
            
        </main>
        
        <div class="status" id="status"></div>
    </div>
    
    <!-- PDF Viewer Section - Fullscreen (outside main container) -->
    <div class="pdf-viewer-fullscreen" id="pdfViewerSection" style="display: none;">
        <div class="pdf-controls">
            <span id="pdfTitle" class="pdf-title">PDF Viewer</span>
            <button id="prevPage" class="btn btn-secondary">Previous</button>
            <span id="pageInfo">Page 1 of 1</span>
            <button id="nextPage" class="btn btn-secondary">Next</button>
            <div class="zoom-controls">
                <button id="zoomOut" class="btn btn-secondary">-</button>
                <span id="zoomLevel">100%</span>
                <button id="zoomIn" class="btn btn-secondary">+</button>
            </div>
            <div id="summarize-button-container"></div>
            <div id="quiz-button-container"></div>
            <div id="print-button-container"></div>
        </div>
        <div class="pdf-viewer-layout">
            <div class="pdf-container-fullscreen">
                <canvas id="pdfCanvas"></canvas>
            </div>
            <div class="summary-panel" id="summaryPanel" style="display: none;">
                <div class="summary-header">
                    <h3>üìù AI Note-Taking Assistant</h3>
                    <div class="api-status" id="api-status">
                        <span class="status-indicator" id="status-indicator"></span>
                        <span id="status-text">Local Mode</span>
                    </div>
                </div>
                
                <div class="summary-body">
                    <div class="input-section">
                        <textarea 
                            id="text-input" 
                            placeholder="Paste your text here..."
                            rows="6"
                        ></textarea>
                        <div class="input-info">
                            <span id="word-count">0 words</span>
                            <div class="length-controls">
                                <label for="summary-length">Length:</label>
                                <select id="summary-length">
                                    <option value="short">Short (50-100 words)</option>
                                    <option value="medium" selected>Medium (100-200 words)</option>
                                    <option value="long">Long (200-300 words)</option>
                                </select>
                            </div>
                            <button id="simplify-btn" class="simplify-btn">Simplify for Notes</button>
                        </div>
                    </div>
                    
                    <div class="output-section" id="output-section" style="display: none;">
                        <label>Simplified Notes:</label>
                        <div class="notes-output" id="notes-output"></div>
                        <div class="output-info">
                            <span id="notes-stats"></span>
                            <button id="copy-notes" class="copy-btn">Copy Notes</button>
                        </div>
                    </div>
                    
                    <div class="loading" id="loading" style="display: none;">
                        <div class="spinner"></div>
                        <span>Simplifying for notes...</span>
                    </div>
                </div>
            </div>
            
            <!-- Quiz Panel -->
            <div class="quiz-panel" id="quizPanel" style="display: none;">
                <div class="quiz-header">
                    <h3>üß† AI Comprehension Quiz</h3>
                    <div class="quiz-controls">
                        <div class="quiz-settings">
                            <label for="quiz-difficulty">Difficulty:</label>
                            <select id="quiz-difficulty">
                                <option value="easy">Easy</option>
                                <option value="medium" selected>Medium</option>
                                <option value="hard">Hard</option>
                            </select>
                            <label for="quiz-count">Questions:</label>
                            <select id="quiz-count">
                                <option value="5">5 Questions</option>
                                <option value="10" selected>10 Questions</option>
                                <option value="15">15 Questions</option>
                            </select>
                        </div>
                        <button id="close-quiz-btn" class="close-btn">&times;</button>
                    </div>
                </div>
                
                <div class="quiz-body">
                    <!-- Quiz Generation Section -->
                    <div class="quiz-generation-section" id="quizGenerationSection">
                        <div class="quiz-intro">
                            <p>Generate a personalized quiz based on the PDF content to test your comprehension!</p>
                            <button id="generate-quiz-btn" class="generate-quiz-btn">üéØ Generate Quiz</button>
                        </div>
                        
                        <div class="quiz-loading" id="quizLoading" style="display: none;">
                            <div class="spinner"></div>
                            <span>Generating quiz questions...</span>
                        </div>
                    </div>
                    
                    <!-- Quiz Questions Section -->
                    <div class="quiz-questions-section" id="quizQuestionsSection" style="display: none;">
                        <div class="quiz-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" id="progressFill"></div>
                            </div>
                            <span id="question-counter">Question 1 of 10</span>
                        </div>
                        
                        <div class="question-container">
                            <div class="question-header">
                                <span class="question-type" id="questionType">Multiple Choice</span>
                                <span class="question-difficulty" id="questionDifficulty">Medium</span>
                            </div>
                            <h4 class="question-text" id="questionText">Loading question...</h4>
                            
                            <div class="question-options" id="questionOptions">
                                <!-- Options will be dynamically generated -->
                            </div>
                            
                            <div class="question-actions">
                                <button id="submit-answer-btn" class="submit-btn" disabled>Submit Answer</button>
                                <button id="next-question-btn" class="next-btn" style="display: none;">Next Question</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Quiz Results Section -->
                    <div class="quiz-results-section" id="quizResultsSection" style="display: none;">
                        <div class="results-header">
                            <h3>üéâ Quiz Complete!</h3>
                            <div class="score-display">
                                <div class="score-circle">
                                    <span id="finalScore">0%</span>
                                </div>
                                <div class="score-details">
                                    <p id="scoreText">Great job!</p>
                                    <p id="scoreBreakdown">0 out of 0 questions correct</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="results-summary">
                            <div class="summary-stats">
                                <div class="stat-item">
                                    <span class="stat-label">Accuracy</span>
                                    <span class="stat-value" id="accuracyStat">0%</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Time Taken</span>
                                    <span class="stat-value" id="timeStat">0:00</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Difficulty</span>
                                    <span class="stat-value" id="difficultyStat">Medium</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="results-actions">
                            <button id="retake-quiz-btn" class="retake-btn">üîÑ Retake Quiz</button>
                            <button id="new-quiz-btn" class="new-quiz-btn">üéØ New Quiz</button>
                            <button id="review-answers-btn" class="review-btn">üìù Review Answers</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Print Dialog -->
            <div class="print-dialog" id="printDialog" style="display: none;">
                <div class="print-dialog-content">
                    <div class="print-header">
                        <h3>üñ®Ô∏è Print PDF</h3>
                        <button id="close-print-btn" class="close-btn">&times;</button>
                    </div>
                    
                    <div class="print-body">
                        <div class="print-simple">
                            <p>Click the button below to print all pages of the PDF.</p>
                            <div class="print-actions">
                                <button id="print-execute-btn" class="print-btn execute-btn">üñ®Ô∏è Print All Pages</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="config.js"></script>
    <script src="summarizer-button/note-taking-button.js"></script>
    <script src="script.js"></script>
</body>
</html>
